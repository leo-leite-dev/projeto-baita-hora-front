@use 'colors' as *;

.overlay {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(1200px 600px at 20% -10%, rgba(110,48,255,.18), transparent 60%),
    radial-gradient(1200px 600px at 120% 110%, rgba(110,48,255,.12), transparent 60%),
    rgba(0,0,0,.58);
  backdrop-filter: blur(10px) saturate(110%);
  z-index: 999;
  animation: overlayIn .22s ease-out;
}

/* ---------- Modal Card ---------- */
.modal-content {
  position: fixed;
  inset: 50% auto auto 50%;
  transform: translate(-50%, -48%) scale(.96);
  width: min(94vw, 480px);
  padding: 22px 22px 18px;
  border-radius: 18px;
  color: $pure-white;
  z-index: 1000;

  /* vidro polido com borda sutil */
  background:
    linear-gradient(180deg, rgba(22,22,26,.92), rgba(14,14,18,.92));
  border: 1px solid rgba(255,255,255,.07);
  box-shadow:
    0 22px 70px rgba(0,0,0,.55),
    0 0 0 1px inset rgba(255,255,255,.03),
    0 0 30px rgba($pure-purple,.18);

  animation: modalIn .26s cubic-bezier(.2,.7,.3,1.08) both;

  /* acento superior */
  &::before {
    content: "";
    position: absolute;
    inset: 0 0 auto 0;
    height: 3px;
    border-top-left-radius: 18px;
    border-top-right-radius: 18px;
    background: linear-gradient(90deg, $pure-purple, #6e30ff 60%, #9a6bff);
    opacity: .8;
    transform: scaleX(0);
    transform-origin: left center;
    animation: accentIn .36s .06s cubic-bezier(.2,.7,.3,1) both;
  }

  /* botão fechar */
  .modal-close-btn {
    position: absolute;
    top: -12px; right: -12px;
    width: 34px; height: 34px;
    display: grid; place-items: center;
    border: 0; border-radius: 50%;
    background: $pure-white; color: #121212;
    font-weight: 800; cursor: pointer;
    box-shadow: 0 8px 20px rgba(0,0,0,.25);
    transition: transform .08s ease, filter .15s ease, box-shadow .2s ease;

    &:hover { filter: brightness(1.02); box-shadow: 0 10px 28px rgba(0,0,0,.32); }
    &:active { transform: translateY(1px) scale(.98); }
  }

  /* header compacto */
  .modal-header {
    margin: 6px 0 14px;

    .brand {
      display: flex; gap: 8px; align-items: center; margin-bottom: 6px;
      &__badge { font-size: 12px; font-weight: 800; letter-spacing: .2px; text-transform: uppercase; }
      &__scope { font-size: 12px; color: rgba(255,255,255,.68); }
    }

    .title {
      margin: 0;
      font: 800 26px/1.15 'Segoe UI','Roboto',sans-serif;
      letter-spacing: .2px;
      text-shadow: 0 1px 0 rgba(0,0,0,.25);
    }
  }

  /* alerta/erro */
  .alert {
    margin: 8px 0 12px; padding: 10px 12px; border-radius: 12px; font-size: 13px;
    color: #ff6b6b; background: rgba(255,79,79,.09);
    border: 1px solid rgba(255,79,79,.28);
  }

  /* form */
  .form { display: grid; gap: 16px; }
  .field { display: grid; gap: 8px; }

  .label {
    font-size: 13px;
    color: rgba(255,255,255,.88);
    font-weight: 700;
    letter-spacing: .2px;
  }

  /* input estiloso + estados */
  .input {
    width: 100%;
    padding: 12px 12px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.08);
    background:
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    color: $pure-white;
    box-shadow: 0 1px 0 rgba(255,255,255,.04) inset;
    transition: border-color .15s ease, box-shadow .2s ease, background .2s ease, transform .06s ease;

    &::placeholder { color: rgba(255,255,255,.45); }

    &:hover { border-color: rgba(255,255,255,.14); }

    &:focus {
      outline: none;
      border-color: rgba($pure-purple,.55);
      box-shadow:
        0 0 0 3px rgba($pure-purple,.28),
        0 0 0 1px inset rgba($pure-purple,.25);
      background: rgba(255,255,255,.07);
    }

    &:disabled {
      opacity: .7;
      cursor: not-allowed;
      filter: saturate(.8);
    }
  }

  /* feedback de erro no campo */
  .field--error .input {
    border-color: rgba(255,79,79,.55);
    box-shadow: 0 0 0 3px rgba(255,79,79,.22);
  }
  .field--error .helper {
    color: #ff7b7b;
  }

  .helper {
    font-size: 12px;
    color: rgba(255,255,255,.6);
  }

  /* botão principal */
  .auth-button {
    width: 100%;
    padding: 12px 14px;
    border: 0; border-radius: 14px;
    font: 800 14.5px/1 'Segoe UI','Roboto',sans-serif;
    color: $pure-white;
    letter-spacing: .2px;
    background: linear-gradient(135deg, #6e30ff, $pure-purple 70%);
    box-shadow: 0 10px 26px rgba($pure-purple,.30), 0 2px 0 rgba(255,255,255,.06) inset;
    cursor: pointer;
    transition: transform .08s ease, filter .15s ease, box-shadow .2s ease;

    &:hover:not(:disabled) { filter: brightness(1.07); box-shadow: 0 14px 36px rgba($pure-purple,.38); }
    &:active:not(:disabled) { transform: translateY(1px); }
    &:disabled { opacity: .55; cursor: not-allowed; box-shadow: none; }
  }

  /* suporte */
  .support {
    margin-top: 12px; text-align: center; font-size: 12.5px;
    .support__link {
      color: $pure-purple; cursor: pointer; text-underline-offset: 2px;
      &:hover { text-decoration: underline; }
    }
  }

  /* foco visível universal (acessibilidade) */
  :is(button,a,input,textarea,select):focus-visible {
    outline: 2px solid rgba($pure-purple,.9);
    outline-offset: 2px; border-radius: 12px;
  }
}

/* ---------- Animations ---------- */
@keyframes overlayIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes modalIn {
  0%   { opacity: 0; transform: translate(-50%,-46%) scale(.94); filter: blur(.6px); }
  60%  { opacity: 1; transform: translate(-50%,-50.5%) scale(1.008); }
  100% { opacity: 1; transform: translate(-50%,-50%)  scale(1); filter: blur(0); }
}
@keyframes accentIn { from { transform: scaleX(0); opacity: .6; } to { transform: scaleX(1); opacity: .8; } }

/* reduz movimento */
@media (prefers-reduced-motion: reduce) {
  .overlay, .modal-content, .modal-content::before {
    animation: none !important;
    transform: translate(-50%, -50%) scale(1) !important;
    filter: none !important;
  }
}

/* responsivo */
@media (max-width: 420px) {
  .modal-content { padding: 16px; border-radius: 16px; }
}
