<section class="content-box" [attr.aria-busy]="loading()">
  <header class="dashboard-header d-flex jc-space-between">
    <div>
      <h1>Dashboard</h1>
      <p class="muted fs-12">Visão rápida do seu dia</p>
    </div>

    <app-date-picker label="Data" [value]="date()" (valueChange)="onDateChange($event)" />
  
  </header>

  <ng-container *ngIf="loading(); else content">
    <div class="skeleton lg" aria-live="polite">
      Carregando agendamentos…
    </div>
  </ng-container>

  <ng-template #content>
    <app-metric-cards [columns]="3" [items]="metricItems" />

    <div class="container-overflow scroll">
      <ng-container *ngIf="!error(); else errorBox">
        <app-team-schedule *ngIf="memberAppointmentsFromStats.length > 0"
          [memberAppointments]="memberAppointmentsFromStats" [daySummary]="daySummaryFromStats"
          (confirmAttendance)="confirmAttendance($event.memberId, $event.appointmentId)" />

        <section *ngIf="appointments().length === 0 && 
                      memberAppointmentsFromStats.length === 0" class="empty d-flex column center">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M5 7h14M7 3v4m10-4v4M6 21h12a2 2 0 0 0 2-2V7H4v12a2 2 0 0 0 2 2Z" />
          </svg>
          <h3>Sem agendamentos</h3>
          <p class="muted">
            Nada marcado para esta data. Aproveite para tomar um café ☕.
          </p>
        </section>
      </ng-container>

      <ng-template #errorBox>
        <div class="alert error" role="alert">
          {{ error() }}
        </div>
      </ng-template>
    </div>
  </ng-template>

</section>