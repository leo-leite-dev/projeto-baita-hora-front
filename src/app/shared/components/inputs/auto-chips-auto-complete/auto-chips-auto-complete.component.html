<div class="input-group chips-autocomplete" [class.disabled]="disabled">
    <label *ngIf="placeholder">{{ placeholder }}</label>

    <div class="chips-input" [class.disabled]="disabled">
        <mat-chip-grid #chipGrid aria-label="Seleção" class="chips">
            <mat-chip-row *ngFor="let item of value; trackBy: chipTrackBy" [removable]="!disabled"
                (removed)="remove(item)" class="chip">
                {{ displayWith(item) }}
                <button matChipRemove *ngIf="!disabled" aria-label="Remover" class="chip-remove">
                    <mat-icon>cancel</mat-icon>
                </button>
            </mat-chip-row>

            <input class="chips-input__field" type="text"
                [placeholder]="value.length ? '' : (inputPlaceholder || 'Digite para buscar')"
                [matChipInputFor]="chipGrid" [matChipInputSeparatorKeyCodes]="[]" [matChipInputAddOnBlur]="false"
                [formControl]="inputCtrl" [matAutocomplete]="auto" (keydown.backspace)="handleBackspace($event)"
                (blur)="markTouched()" />

        </mat-chip-grid>
    </div>

    <mat-autocomplete #auto="matAutocomplete" class="chips-panel" (optionSelected)="select($event)">
        <mat-option *ngFor="let option of (filtered$ | async) ?? []" [value]="option" [disabled]="isSelected(option)">
            {{ displayWith(option) }}
        </mat-option>

        <mat-option *ngIf="((filtered$ | async) ?? []).length === 0" disabled>
            Nenhum resultado
        </mat-option>
    </mat-autocomplete>
</div>